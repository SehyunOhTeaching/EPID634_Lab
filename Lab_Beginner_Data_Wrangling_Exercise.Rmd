---
title: "Introduction to Data Wrangling in R - Beginner Friendly"
author: "Student Name"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: true
    toc_float: true
    theme: cosmo
    code_folding: show
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
```

# Welcome! 👋

This lab will teach you the basics of working with data in R. Don't worry if you're new to programming - we'll go step by step!

## What You'll Learn

By the end of this lab, you'll be able to:
- Load data into R
- Look at your data in different ways
- Filter data to see only what you want
- Create new columns
- Calculate summary statistics
- Combine datasets

**Time needed:** About 3-4 hours

---

# Getting Started

## Step 1: Install and Load Packages

Think of packages like apps on your phone - they add new features to R!

```{r packages}
# Install packages (only need to do this ONCE)
# Remove the # to run these lines:
# install.packages("tidyverse")

# Load packages (do this EVERY TIME you open R)
library(tidyverse)

# If this works, you'll see some text appear. That's normal!
```

**What is tidyverse?** It's actually a collection of 8 packages that work well together. The main ones we'll use are:
- **dplyr** - for working with data
- **ggplot2** - for making charts (we'll use this later)
- **readr** - for reading data files

---

## Step 2: Create Sample Data

We'll create a simple dataset about a bakery's sales. Don't worry about understanding all the code right now - just run it!

```{r create-data}
# Create a dataset
bakery_sales <- tibble(
  date = c("2024-01-01", "2024-01-01", "2024-01-02", "2024-01-02", "2024-01-03"),
  item = c("Bread", "Cake", "Bread", "Cookie", "Cake"),
  quantity = c(5, 2, 8, 10, 3),
  price = c(3.50, 15.00, 3.50, 2.00, 15.00),
  customer = c("Alice", "Bob", "Alice", "Charlie", "Alice")
)

# Look at the data
bakery_sales
```

**💡 Tip:** A `tibble` is just a fancy name for a data table in R!

---

# PART 1: Looking at Your Data

## Exercise 1.1: See Your Data

There are several ways to look at your data:

```{r view-data}
# Method 1: Just type the name
bakery_sales

# Method 2: See the first few rows
head(bakery_sales)

# Method 3: See a summary
glimpse(bakery_sales)
```

**Practice Question 1:** How many rows (observations) are in our data?

**Practice Question 2:** How many columns (variables) do we have?

---

## Exercise 1.2: Understanding Your Data

```{r understand-data}
# How many rows?
nrow(bakery_sales)

# How many columns?
ncol(bakery_sales)

# What are the column names?
colnames(bakery_sales)

# Get basic statistics
summary(bakery_sales)
```

**🎯 YOUR TURN:** Run each line above and write down:
1. Number of rows: _____
2. Number of columns: _____
3. Column names: _____

---

# PART 2: Selecting Columns

Sometimes you only want to see certain columns.

## Exercise 2.1: Pick Specific Columns

```{r select-columns}
# Select just the item and price columns
bakery_sales %>%
  dplyr::select(item, price)
```

**❓ What does %>% mean?** 
Think of it as "and then..." - it lets you chain commands together!

```{r select-examples}
# Select multiple columns
bakery_sales %>%
  dplyr::select(date, item, quantity)

# Select all columns EXCEPT one
bakery_sales %>%
  dplyr::select(-customer)

# Rename while selecting
bakery_sales %>%
  dplyr::select(product = item, amount = quantity)
```

**🎯 YOUR TURN:** Select only the date and customer columns.

```{r practice-2-1}
# Write your code here:

```

---

# PART 3: Filtering Rows

Filtering means showing only rows that meet certain conditions.

## Exercise 3.1: Basic Filtering

```{r filter-basic}
# Show only Bread sales
bakery_sales %>%
  filter(item == "Bread")
```

**⚠️ Important:** Use `==` (two equals signs) to check if something equals something else!

```{r filter-examples}
# Show sales where quantity is more than 5
bakery_sales %>%
  filter(quantity > 5)

# Show sales where price is exactly $15
bakery_sales %>%
  filter(price == 15.00)

# Show sales that are NOT bread
bakery_sales %>%
  filter(item != "Bread")
```

**Common Comparison Operators:**
- `==` equals
- `!=` not equals
- `>` greater than
- `<` less than
- `>=` greater than or equal to
- `<=` less than or equal to

**🎯 YOUR TURN:** Show only sales where the customer is Alice.

```{r practice-3-1}
# Write your code here:

```

---

## Exercise 3.2: Combining Filters

You can combine multiple conditions!

```{r filter-multiple}
# Show Bread sales with quantity more than 3
# Using AND (&)
bakery_sales %>%
  filter(item == "Bread" & quantity > 3)

# Show sales that are EITHER Bread OR Cake
# Using OR (|)
bakery_sales %>%
  filter(item == "Bread" | item == "Cake")

# Easier way for OR:
bakery_sales %>%
  filter(item %in% c("Bread", "Cake"))
```

**🎯 YOUR TURN:** Show sales where quantity is more than 5 AND price is less than $10.

```{r practice-3-2}
# Write your code here:

```

---

# PART 4: Creating New Columns

You can add new columns based on existing ones!

## Exercise 4.1: Basic Calculations

```{r mutate-basic}
# Create a total_price column
bakery_sales %>%
  mutate(total_price = quantity * price)
```

**What happened?** We multiplied quantity by price to get the total for each sale!

```{r mutate-examples}
# Create multiple new columns at once
bakery_sales %>%
  mutate(
    total_price = quantity * price,
    is_expensive = price > 10,
    sale_date = date  # just copying a column
  )
```

**🎯 YOUR TURN:** Create a column called `discount` that is 10% of the price.

```{r practice-4-1}
# Write your code here:
# Hint: 10% = 0.10

```

---

## Exercise 4.2: Conditional Columns

Sometimes you want different values based on conditions.

```{r mutate-conditional}
# Add a category column
bakery_sales %>%
  mutate(
    category = if_else(price > 10, "Expensive", "Affordable")
  )
```

**How it works:** if_else checks each row:
- If price > 10, put "Expensive"
- Otherwise, put "Affordable"

```{r mutate-case-when}
# For multiple conditions, use case_when
bakery_sales %>%
  mutate(
    price_category = case_when(
      price < 5 ~ "Cheap",
      price < 10 ~ "Medium",
      price >= 10 ~ "Expensive"
    )
  )
```

**🎯 YOUR TURN:** Create a column called `size` that says:
- "Small" if quantity < 5
- "Medium" if quantity < 10
- "Large" if quantity >= 10

```{r practice-4-2}
# Write your code here:

```

---

# PART 5: Sorting Data

Put your data in order!

## Exercise 5.1: Arrange by Column

```{r arrange-basic}
# Sort by price (lowest to highest)
bakery_sales %>%
  arrange(price)

# Sort by price (highest to lowest)
bakery_sales %>%
  arrange(desc(price))
```

**🎯 YOUR TURN:** Sort by quantity from highest to lowest.

```{r practice-5-1}
# Write your code here:

```

---

# PART 6: Grouping and Summarizing

This is where things get powerful! You can calculate statistics for groups.

## Exercise 6.1: Count Things

```{r count-basic}
# How many times did we sell each item?
bakery_sales %>%
  count(item)

# Sort the counts
bakery_sales %>%
  count(item, sort = TRUE)
```

**🎯 YOUR TURN:** Count how many times each customer appears.

```{r practice-6-1}
# Write your code here:

```

---

## Exercise 6.2: Calculate Summaries

```{r summarize-basic}
# Calculate total quantity sold
bakery_sales %>%
  summarise(total_quantity = sum(quantity))
```

**Common Summary Functions:**
- `sum()` - add up all values
- `mean()` - calculate average
- `median()` - find middle value
- `min()` - find smallest value
- `max()` - find largest value
- `n()` - count rows

```{r summarize-examples}
# Multiple summaries at once
bakery_sales %>%
  summarise(
    total_sales = sum(quantity),
    average_price = mean(price),
    cheapest_item = min(price),
    most_expensive = max(price),
    number_of_sales = n()
  )
```

**🎯 YOUR TURN:** Calculate the average quantity sold.

```{r practice-6-2}
# Write your code here:

```

---

## Exercise 6.3: Group By

This is the SUPER POWER of data analysis!

```{r group-by-basic}
# Calculate total quantity for each item
bakery_sales %>%
  group_by(item) %>%
  summarise(total_quantity = sum(quantity))
```

**How it works:**
1. `group_by(item)` - Split data into groups (one per item)
2. `summarise()` - Calculate summary for each group

```{r group-by-examples}
# Multiple grouping variables
bakery_sales %>%
  mutate(total_price = quantity * price) %>%
  group_by(item, customer) %>%
  summarise(
    times_bought = n(),
    total_spent = sum(total_price),
    .groups = 'drop'
  )
```

**🎯 YOUR TURN:** Find the total quantity sold by each customer.

```{r practice-6-3}
# Write your code here:

```

---

# PART 7: Putting It All Together

Let's combine what we've learned!

## Exercise 7.1: Multi-Step Analysis

```{r combined-example}
# Find total revenue by item, sorted by revenue
bakery_sales %>%
  mutate(total_price = quantity * price) %>%
  group_by(item) %>%
  summarise(
    total_quantity = sum(quantity),
    total_revenue = sum(total_price),
    average_price = mean(price)
  ) %>%
  arrange(desc(total_revenue))
```

**🎯 CHALLENGE:** Create an analysis that shows:
1. Only sales where quantity > 2
2. Calculate total revenue (quantity * price) for each customer
3. Sort by revenue from highest to lowest

```{r practice-7-1}
# Write your code here:
# Break it down step by step!

```

---

# PART 8: Working with Real Data Files

So far we created data in R. Now let's learn to read files!

## Exercise 8.1: Save and Read CSV Files

```{r save-read-files}
# Save our data to a CSV file
write_csv(bakery_sales, "outputs/my_bakery_data.csv")

# Read it back
my_data <- read_csv("outputs/my_bakery_data.csv")

# Check if it worked
my_data
```

**What is CSV?** 
CSV stands for "Comma-Separated Values" - it's like Excel but simpler. You can open CSV files in Excel!

**🎯 YOUR TURN:** 
1. Save the bakery data with a different filename
2. Read it back into a new variable
3. View the data to make sure it worked

```{r practice-8-1}
# Write your code here:

```

---

# COMPREHENSIVE EXERCISE: Analyze Your Own Data!

Now it's time to put everything together. Let's create and analyze a slightly larger dataset.

## The Scenario

You run a small coffee shop and have data for one week of sales.

```{r final-project-data}
# Create coffee shop data
coffee_shop <- tibble(
  day = c("Monday", "Monday", "Tuesday", "Tuesday", "Wednesday", 
          "Wednesday", "Thursday", "Friday", "Friday", "Saturday"),
  drink = c("Latte", "Cappuccino", "Latte", "Espresso", "Cappuccino",
            "Latte", "Espresso", "Latte", "Cappuccino", "Latte"),
  size = c("Medium", "Large", "Small", "Small", "Medium",
           "Medium", "Small", "Large", "Medium", "Large"),
  price = c(4.50, 5.00, 3.50, 2.50, 5.00,
            4.50, 2.50, 5.50, 5.00, 5.50),
  quantity = c(15, 8, 12, 5, 10,
               18, 7, 20, 12, 25)
)

# Look at the data
coffee_shop
```

## Your Tasks

**Task 1:** How many total drinks were sold this week?

```{r task-1}
# Hint: use sum()

```

**Task 2:** What was the average price?

```{r task-2}
# Hint: use mean()

```

**Task 3:** Which drink was sold the most?

```{r task-3}
# Hint: group_by() and summarise(), then arrange()

```

**Task 4:** Calculate total revenue (quantity * price) for each day.

```{r task-4}
# Hint: mutate() first, then group_by() and summarise()

```

**Task 5:** Find the best-selling size of drinks.

```{r task-5}
# Your code here:

```

**Task 6:** Which day had the highest revenue?

```{r task-6}
# Your code here:

```

---

# Quick Reference Guide

## Common Functions Cheat Sheet

### Looking at Data
```r
head(data)           # First 6 rows
glimpse(data)        # Overview
summary(data)        # Statistics
```

### Selecting Columns
```r
select(data, column1, column2)     # Pick columns
select(data, -column1)             # Remove column
```

### Filtering Rows
```r
filter(data, column > 10)          # One condition
filter(data, col1 > 10 & col2 < 5) # Multiple conditions (AND)
filter(data, col1 > 10 | col2 < 5) # Multiple conditions (OR)
```

### Creating Columns
```r
mutate(data, new_col = old_col * 2)
mutate(data, category = if_else(price > 10, "High", "Low"))
```

### Sorting
```r
arrange(data, column)              # Ascending
arrange(data, desc(column))        # Descending
```

### Grouping and Summarizing
```r
group_by(data, column)
summarise(data, total = sum(column))
count(data, column)
```

---

# Tips for Success 🌟

1. **Run code line by line** - Don't try to run everything at once
2. **Read error messages** - They usually tell you what's wrong
3. **Use # for comments** - Add notes to remember what you did
4. **Save your work often** - Use File > Save
5. **Practice, practice, practice** - Try variations of the examples
6. **Ask for help** - Everyone struggles at first!

## Common Errors and Solutions

**Error: `could not find function`**
- Solution: Did you load the package with `library()`?

**Error: `object not found`**
- Solution: Did you spell the name correctly? Is it case-sensitive!

**Error: `unexpected symbol`**
- Solution: Check for missing commas or parentheses

---

# What's Next?

After mastering this lab, you can move on to:

1. **Data Visualization** - Making charts and graphs with ggplot2
2. **More Data Wrangling** - Joining datasets, reshaping data
3. **Your Own Projects** - Analyze data that interests you!

---

# Extra Practice Problems

Want more practice? Try these!

## Problem 1: Pet Store

Create a dataset with pet sales and find:
1. Most popular pet
2. Average price
3. Total revenue

```{r extra-1}
# Your code here:

```

## Problem 2: Grade Analysis

Create student grade data and find:
1. Average grade by subject
2. Students with grades > 90
3. Lowest and highest grades

```{r extra-2}
# Your code here:

```

---

# Congratulations! 🎉

You've completed the beginner-friendly data wrangling lab!

You now know how to:
- ✅ Load and view data
- ✅ Select columns
- ✅ Filter rows
- ✅ Create new columns
- ✅ Sort data
- ✅ Calculate summaries
- ✅ Group data
- ✅ Read and write files

**Keep practicing and you'll be a data wizard in no time!** 🧙‍♂️

---

# Resources for Learning More

- [R for Data Science (free book)](https://r4ds.had.co.nz/)
- [RStudio Cheat Sheets](https://www.rstudio.com/resources/cheatsheets/)
- [Stack Overflow](https://stackoverflow.com/questions/tagged/r) - for questions
- Your instructor's office hours!

---

# Session Information
```{r session-info}
sessionInfo()
```
